<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
<script src="//maps.googleapis.com/maps/api/js?v=3&amp;sensor=false&amp;key=AIzaSyClJ3Ur6zCQQWPtpkHi5WmEx8QWfrI1cgE"></script>
<script src="js/firebase-persistence.js"></script>
<script>
    /*
    var scoreForm = document.getElementById('score-form');
    if (scoreForm.addEventListener) {
        scoreForm.addEventListener('submit', submitScore, false); 
    } else if (scoreForm.attachEvent)  {
        scoreForm.attachEvent('onsubmit', submitScore);
    }
    function validateScore(){
        return true;
    }
    function validatePlayer(){
        return true;
    }
    function submitScore(e){
        var player = document.getElementById('player'),
            score = document.getElementById('score')
        e.preventDefault();
        if(validateScore && validatePlayer){
            postScore(player.value, score.value);
        }
    }*/
    var holeFields = $("#scorecard").find("[name^='hole']");
    $("#scorecard").on("blur","[name^='hole']",function(){
        var thisScore = $(this).val();
        if(thisScore !== ""){
            thisScore = parseInt(thisScore,10);
            if(thisScore < 3){
                $(this).removeClass("over-par");
                $(this).addClass("under-par");
            }
            else if(thisScore > 3){
                $(this).removeClass("under-par");
                $(this).addClass("over-par");
            }
            else{
                $(this).removeClass("over-par");
                $(this).removeClass("under-par");
            }
        }

    });
</script>
<script>
    var map,
        latlngbounds;
    function map_initialize() {
        var icon = {
            path: "M-20,0a20,20 0 1,0 40,0a20,20 0 1,0 -40,0",
            fillColor: '#FF0000',
            fillOpacity: .6,
            anchor: new google.maps.Point(0,0),
            strokeWeight: 0,
            scale: 1
        };

        var icon2 = {
            path: "M 94.955,115.832 100,81.939 l -28.54,0 c 0,0 16.175,-24.743233 16.175,-70.983233 l 7.794981,0 0,-10.60221361 L 4.3836797,0 l 0,10.954767 8.6934273,0 c 0,46.24 15.458893,70.983233 15.458893,70.983233 l -28.536,0 0,0.024 5.041,33.869 35.274699,0 0,55.386 19.718155,0.22 0.353554,-55.606 34.567592,0 z",
            fillColor: '#000000',
            fillOpacity: 0.8,
            anchor: new google.maps.Point(0,0),
            strokeWeight: 0.5,
            strokeColor : "#FFFFFF",
            scale: 0.125
        };

        var golfHoles = [
            {
                name: "Hole One",
                latlng: new google.maps.LatLng(-39.0695346,174.1073713)
            },
            {
                name: "Hole Two",
                latlng: new google.maps.LatLng(-39.0701330,174.1083712)
            },
            {
                name: "Hole Three",
                latlng: new google.maps.LatLng(-39.0702351,174.1080711)
            },
            {
                name: "Hole Four",
                latlng: new google.maps.LatLng(-39.0706656,174.1099710)
            },
            {
                name: "Hole Five",
                latlng: new google.maps.LatLng(-39.0702351,174.1089714)
            },
            {
                name: "Hole Six",
                latlng: new google.maps.LatLng(-39.0698767,174.1087862)
            },
            {
                name: "Hole Seven",
                latlng: new google.maps.LatLng(-39.0706606,174.1073717)
            },
            {
                name: "Hole Eight",
                latlng: new google.maps.LatLng(-39.0706656,174.1088686)
            },
            {
                name: "Hole Nine",
                latlng: new google.maps.LatLng(-39.0695323,174.1094426)
            }
        ];
        map = new google.maps.Map(document.getElementById("map-container"), {
            center: new google.maps.LatLng(0, 0),
            zoom: 0,
            zoomControl: true,
            mapTypeControl: false,
            scaleControl: false,
            streetViewControl: false,
            rotateControl: false,
            fullscreenControl: false,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        });
        for (var i = 0; i < golfHoles.length; i++) {
            new google.maps.Marker({
                position: golfHoles[i].latlng,
                map: map,
                icon: icon2,
                title: golfHoles[i].name
            });
        }
        latlngbounds = new google.maps.LatLngBounds();
        for (var i = 0; i < golfHoles.length; i++) {
            latlngbounds.extend(golfHoles[i].latlng);
        }
        map.fitBounds(latlngbounds);
    }
    google.maps.event.addDomListener(window, 'load', map_initialize);
    google.maps.event.addDomListener(window, "resize", function() {
        map.fitBounds(latlngbounds);
    });

    function generateScoreTable(jsonData){
        var scoreString = JSON.stringify(jsonData);
        $("#scores-section").find("h2").first().after("<p>" + scoreString + "</p>");
    }
    registerForTopTen(generateScoreTable);
</script>